(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[727],{72007:(e,t,a)=>{"use strict";a.r(t),a.d(t,{QueueHistoryRoutes:()=>ue,default:()=>oe});var n=a(27378),r=a.n(n),l=a(41056),s=a(34514),c=a(53177),i=a(17688),u=a(61043);const o="_820f7340af1a89fcd7ac709b86ab8912-scss",m="fdca66a91ac0a835b7e00d3680e61362-scss";var d=a(38517),b=a(7593),f=a(50324),p=a(65526),E=a.n(p),g=a(66917),v=a.n(g),y=a(48682),h=a(27245);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){E()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const w=[];var x=a(83131),N=a(65821),D=a(24368),C=a(2031);const _=r().memo((({items:e})=>{const t=function(e){const[t,a]=(0,n.useState)({});return(0,n.useEffect)((()=>{const n=Array.from(new Set(e)),r=n.filter((e=>v().isTrack(e)&&!t[e])),l=n.filter((e=>v().isEpisode(e)&&!t[e])),s=r.length?y.fQ.getTracks(h.b.getInstance(),r.map((e=>v().from(e).getBase62Id()))).then((e=>{var t;return(null==e||null===(t=e.body)||void 0===t?void 0:t.tracks)||w})):Promise.resolve(w),c=l.map((e=>y.di.getEpisodeGraphQL(h.b.getInstance(),v().from(e).getBase62Id()).then((e=>(null==e?void 0:e.body)||{}))));Promise.all([s,...c]).then((e=>{const t=e.shift(),n=e,r={},l={};t.forEach((e=>{var t;r[(null==e||null===(t=e.linked_from)||void 0===t?void 0:t.uri)||e.uri]=e})),n.forEach((e=>{l[e.uri]=e})),(t.length>0||n.length>0)&&a((e=>O(O(O({},e),r),l)))}))}),[e,t]),e.map((e=>t[e]))}(e.map((e=>e.uri))).map(((t,a)=>e[a].type===x.l.local?e[a]:t)),a=(0,n.useCallback)(((e,t)=>{if(e.type===C.p.TRACK){var a;const n=(0,N.Z)(null===(a=e.album)||void 0===a?void 0:a.images,{desiredSize:40});return r().createElement(f.Lk,{key:t+e.uri,index:t,uri:(0,D.$V)(e),name:e.name,duration_ms:e.duration_ms,imgUrl:(null==n?void 0:n.url)||"",album:e.album,artists:e.artists,isExplicit:e.explicit,isMOGEFRestricted:(e.tags||[]).includes("MOGEF-19+"),type:x.l.track})}var n,l;if((e=>e.type===C.p.EPISODE)(e)){var s;const a=(0,N.Z)(null===(s=e.show)||void 0===s?void 0:s.images,{desiredSize:40});return r().createElement(f.Lk,{key:t+e.uri,index:t,uri:(0,D.$V)(e),name:e.name,duration_ms:e.duration_ms,imgUrl:(null==a?void 0:a.url)||"",album:{name:e.show.name,uri:e.show.uri},artists:[{name:e.show.publisher,uri:""}],isExplicit:e.explicit,isMOGEFRestricted:!1,type:x.l.episode})}return(e=>e.type===x.l.local)(e)?r().createElement(f.Lk,{key:t+e.uri,index:t,uri:e.uri,name:e.name,duration_ms:e.duration,imgUrl:e.imageUrl||"",album:{name:(null===(n=e.album)||void 0===n?void 0:n.name)||"",uri:""},artists:[{name:(null===(l=e.artist)||void 0===l?void 0:l.name)||"",uri:""}],isExplicit:e.isExplicit,isMOGEFRestricted:!1,type:x.l.local}):r().createElement(d.hU,{height:`${d.dN}px`})}),[]);return r().createElement(r().Fragment,null,r().createElement(b.ZP,{value:"play-history-tracklist"},r().createElement(d.Pv,{ariaLabel:"play-history",hasHeaderRow:!0,columns:[d.QD.TITLE,d.QD.ALBUM_OR_PODCAST,d.QD.DURATION],renderRow:a,resolveUri:e=>e.uri,tracks:t,nrTracks:t.length,rowPlaceholder:d.hU,limit:50})))})),q=()=>{const e=(0,i.U5)();return r().createElement("div",{className:o},r().createElement(c.Dy.h1,{variant:c.$e.canon,color:s.color.white,className:m},u.ag.get("view.recently-played")),e&&e.items.length>0?r().createElement(_,{items:e.items}):null)};var U=a(60042),P=a.n(U),T=a(79308),I=a(30245),L=a(15941),S=a(96415),R=a(71338),j=a(11111),A=a(23301);const F=r().memo((({tracks:e,ariaLabel:t,contextUri:a,rowNumberOffset:l=0,section:s})=>{const c=(0,j.o)(),i=(0,T.I0)(),u=(0,n.useCallback)(((e,t)=>{c({intent:"remove-from-queue",type:"click"}),i((0,A.m6)(e.map((e=>e.id)))),t()}),[i,c]),o=(0,n.useCallback)(((e,t)=>{if(f=e,v().isEpisode(f.uri)){var n;const c=(0,N.Z)(null===(n=e.show)||void 0===n?void 0:n.images,{desiredSize:40});return r().createElement(d.pD,{key:t+l+e.uid,index:t,rowNumberOffset:l,imgUrl:(null==c?void 0:c.url)||"",uri:(0,D.$V)(e),uid:e.uid,contextUri:a,duration_ms:e.duration_ms,name:e.name,artists:[{name:e.show.publisher,uri:""}],album:{name:e.show.name,uri:e.show.uri},isExplicit:e.explicit,isPlayable:e.is_playable,isMOGEFRestricted:!1,type:d.jO.EPISODE,section:s})}if((e=>v().isTrack(e.uri))(e)){var c;const n=(0,N.Z)(null==e||null===(c=e.album)||void 0===c?void 0:c.images,{desiredSize:40});return r().createElement(d.pD,{key:t+l+e.uid,index:t,rowNumberOffset:l,imgUrl:(null==n?void 0:n.url)||"",uri:(0,D.$V)(e),uid:e.uid,contextUri:a,duration_ms:e.duration_ms,name:e.name,artists:e.artists,album:e.album,isExplicit:e.explicit,isPlayable:e.is_playable,isMOGEFRestricted:(e.tags||[]).includes("MOGEF-19+"),type:d.jO.TRACK,section:s})}var i,u,o,m,b,f;return(e=>v().isLocalTrack(e.uri))(e)?r().createElement(d.pD,{key:t+l+e.uid,index:t,rowNumberOffset:l,imgUrl:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.image_url)||"",uri:e.uri,uid:e.uid,contextUri:a,duration_ms:parseInt(null==e||null===(u=e.metadata)||void 0===u?void 0:u.duration,10)||0,name:null==e||null===(o=e.metadata)||void 0===o?void 0:o.title,artists:[{name:null==e||null===(m=e.metadata)||void 0===m?void 0:m.artist_name,uri:""}],album:{name:null==e||null===(b=e.metadata)||void 0===b?void 0:b.album_title,uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:d.jO.LOCAL,section:s}):r().createElement(d.Lb,{height:`${d.dN}px`})}),[l,a,s]);return e&&r().createElement(d.Pv,{ariaLabel:t,tracks:e,nrTracks:e.length,onRemove:u,renderRow:o,resolveUri:e=>{var t;return(null===(t=e.linked_from)||void 0===t?void 0:t.uri)||e.uri},resolveUid:e=>e.uid,columns:[d.QD.INDEX,d.QD.TITLE,d.QD.ALBUM,d.QD.DURATION]})})),Q="dcfdcf420d98ada76580703c14c6304e-scss";var M=a(35415);const $=({onClick:e})=>r().createElement(M.z,{className:Q,version:"outlined",onClick:e,title:u.ag.get("queue.clear-queue")},r().createElement(c.Dy,{variant:c.$e.minuetBold},u.ag.get("queue.clear-queue"))),B="_228a6c18d885774ce6da9588dc5d6df7-scss",G="_4d85d24a7888e789585c36d1df8c922b-scss",Z="dfd3f6c5be5c3365b176d86b702f54c4-scss",z="c08d7ac77aad119eb2f6bb322fa7fff4-scss",W="dc019b1735ef8b8cb4c1d3b368e0cd46-scss";var V=a(26012);const H="c5cc5d892cc3af9a8bd3ac02831874ac-scss",K="_8089996e667ebed9a4150cf8dbae5329-scss",Y="_567f31884f95fc069db7613952dc73b5-scss",X="a7fa9bc878bb360f56126612d885e312-scss",J="_17882f50ac754b354fcfe8a5c3dd5531-scss";var ee=a(46036),te=a(95547);const ae=r().memo((({onClose:e,onConfirm:t,isOpen:a,itemCount:l})=>{const s=(0,n.useCallback)((a=>{t(),e(a)}),[t,e]),i=u.ag.get("queue.confirm-title",l);return r().createElement(ee.Z,{shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:i,isOpen:a},r().createElement("div",{className:H},r().createElement(c.Dy,{as:"h2",variant:c.Dy.cello,className:K},i),r().createElement(c.Dy,{as:"p",variant:c.Dy.mesto,className:Y},u.ag.get("queue.confirm-message")),r().createElement("div",{className:X},r().createElement(te.Y,{className:J,version:"tertiary",onClick:e},u.ag.get("queue.cancel-button")),r().createElement(te.Y,{version:"primary",onClick:s},u.ag.get("queue.confirm-button")))))})),ne=()=>{const{currentTrack:e,nextTracks:t,currentDecoratedTrack:a,queuedDecoratedTracks:l,nextDecoratedTracks:i,isFetching:o}=(0,T.v9)(S.Un)||{},{contextURI:m,contextDescription:d}=(0,T.v9)(S.dO),f=(0,T.I0)(),[p,E]=(0,n.useState)(!1);(0,n.useEffect)((()=>{f((0,L._T)({currentTrack:e,nextTracks:t}))}),[f,e,t]),(0,n.useEffect)((()=>{f((0,R.Dk)(u.ag.get("queue.page-title")))}),[f]);const g=(0,n.useCallback)((()=>{E(!1)}),[E]),v=(0,n.useCallback)((()=>{f((0,A.B5)()),E(!1)}),[f]),y=(0,n.useCallback)((()=>{E(!0)}),[E]),h=!(null==l||!l.length),k=!(null==i||!i.length),O=!1===o&&!1===(a||h||k);return r().createElement("section",{className:B},r().createElement(c.Dy.h1,{variant:c.$e.canon,color:s.color.white,className:G},u.ag.get("playback-control.queue")),O&&r().createElement("p",{className:"Queue--empty"},u.ag.get("queue.no-more-tracks")),a&&m&&r().createElement(r().Fragment,null,r().createElement(c.Dy.h2,{variant:c.$e.balladBold,color:s.color.gray70},u.ag.get("queue.now-playing")),r().createElement(b.ZP,{value:"now-playing"},r().createElement(F,{ariaLabel:u.ag.get("queue.now-playing"),tracks:[a],contextUri:m,section:V.hb.NowPlaying}))),h&&m&&r().createElement(r().Fragment,null,r().createElement("div",{className:P()(W,Z)},r().createElement(c.Dy.h2,{variant:c.$e.balladBold,color:s.color.gray70},u.ag.get("queue.next-in-queue")),h&&r().createElement($,{onClick:y})),r().createElement(b.ZP,{value:"next-in-queue"},r().createElement(F,{ariaLabel:u.ag.get("queue.next-in-queue"),tracks:l||[],rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",section:V.hb.NextInQueue}))),k&&m&&r().createElement(r().Fragment,null,r().createElement(c.Dy.h2,{variant:c.$e.balladBold,color:s.color.gray70,className:P()(Z,"standalone-ellipsis-one-line")},d?u.ag.get("queue.next-from"):u.ag.get("queue.next-up"),"Â ",r().createElement(I.r,{className:z,to:m},d)),r().createElement(b.ZP,{value:"next-up"},r().createElement(F,{ariaLabel:u.ag.get("queue.next-up"),tracks:i||[],rowNumberOffset:1+((null==l?void 0:l.length)||0),contextUri:"spotify:app:queue:NextUp",section:V.hb.NextUp}))),r().createElement(ae,{itemCount:(null==l?void 0:l.length)||0,isOpen:p,onClose:g,onConfirm:v}))};var re=a(55951),le=a(94212),se=a(24827);const ce="eb0179b36e29c2b4f58be0569252f518-scss",ie=()=>{const[e,t]=(0,n.useState)(window.innerWidth);(0,re.a)((()=>{t(window.innerWidth)}));const a=(0,n.useMemo)((()=>[{title:u.ag.get("playback-control.queue"),itemId:"queue",to:"/queue"},{title:u.ag.get("view.recently-played"),itemId:"history",to:"/history"}]),[]);return r().createElement(se.w,null,r().createElement(le.n,{className:ce,links:a,windowSize:e}))},ue=()=>{const e=(0,i.nF)();return r().createElement("section",{className:"contentSpacing"},e&&r().createElement(l.AW,{path:"/history"},r().createElement(q,null)),r().createElement(l.AW,{path:"/queue"},r().createElement(n.Suspense,{fallback:null},r().createElement(ne,null))),e&&r().createElement(ie,null))},oe=ue},94212:(e,t,a)=>{"use strict";a.d(t,{n:()=>k});var n=a(27378),r=a.n(n),l=a(60042),s=a.n(l),c=a(79651),i=a(61043),u=a(1041);const o="_0e8005074dbda3fac5e3e0351fa82d97-scss",m="d6ef1d453414ee43f5a3edc1dd983cc3-scss",d="_0787ecf44d56591be72b1f2c0e2f2320-scss",b="_1ee22b041204a058b2895bea552e2504-scss",f="e2a5efd5c84a2cb9bdd6998a3b7ac0e0-scss",p="_324caa48310888b172e544a6ee04471e-scss",E="_43e978b8fbef3b1a5fc86ea29e51a0fd-scss",g="a4bc298d40e9660cd25cd3ac1a7f9c49-scss",v="_50d97b6270ce5e1b70d300348bc6b80d-scss",y="_2773c2424ba6aa0d79b2c134b3efba22-scss";var h=a(53177);const k=r().memo((({isCentered:e,links:t,landmarkLabel:a,className:l,windowSize:k=1/0})=>{const[O,w]=(0,n.useState)(null),x=(0,n.useRef)(null),[N,D]=(0,n.useState)([]),[C,_]=(0,n.useState)(0),[q,U]=(0,n.useState)([]);(0,n.useEffect)((()=>{x.current&&_(x.current.clientWidth)}),[k]),(0,n.useEffect)((()=>{if(!x.current)return;const e=Array.from(x.current.children).map((e=>e.clientWidth));D(e)}),[t]),(0,n.useEffect)((()=>{if(!x.current)return;if(N.slice(0,-1).reduce(((e,t)=>e+t),0)<=C)return void U([]);const e=N.reduce(((e,t)=>e>t?e:t),0),t=[];let a=e;N.forEach(((e,n)=>{C>=a+e?a+=e:t.push(n)})),U(t)}),[C,N]);const P=(0,n.useCallback)((e=>!!e&&(w(null),!0)),[]),T=(0,n.useCallback)(((e,t)=>r().createElement("button",{className:s()(b,{[f]:O}),type:"button",onClick:t,"aria-expanded":e},r().createElement(h.Dy,{as:"span",variant:h.Dy.mestoBold},O?O.title:i.ag.get("more")),r().createElement("span",{className:s()(y,{"spoticon-chart-up-16":e,"spoticon-chart-down-16":!e})}))),[O]),I=(0,n.useMemo)((()=>t.map(((e,t)=>q.includes(t)?r().createElement(u.hP,{exact:!0,className:p,activeClassName:g,to:e.to,selected:e.itemId===(O&&O.itemId),isActive:t=>!!t&&(w(e),!0),onClick:()=>{w(e)}},e.title):null))),[q,t,O]);return r().createElement("nav",{className:s()(l,o),"aria-label":a},r().createElement("ul",{className:e?m:v,ref:x},t.map(((e,t)=>q.includes(t)?null:r().createElement("li",{key:e.to,className:d},r().createElement(c.O,{exact:!0,className:E,activeClassName:g,to:e.to,isActive:P},r().createElement(h.Dy,{variant:h.Dy.mestoBold},e.title))))),q.length||0===N.length?r().createElement("li",{className:d},r().createElement(u.Lt,{items:I,render:T})):null))}))}}]);